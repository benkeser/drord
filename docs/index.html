<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Doubly-Robust Estimators for Ordinal Outcomes • drord</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Doubly-Robust Estimators for Ordinal Outcomes">
<meta property="og:description" content="Efficient covariate-adjusted estimators of quantities that are useful for 
    establishing the effects of treatments on ordinal outcomes.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">drord</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/using_drord.html">`drord`: Doubly robust estimators of ordinal treatment effects</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/benkeser/drord">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<div id="rdrord" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#rdrord" class="anchor"></a>R/<code>drord</code>
</h1></div>

<blockquote>
<p>Doubly robust estimators of treatment effects for ordinal outcomes</p>
</blockquote>
<p><strong>Author:</strong> <a href="https://www.sph.emory.edu/faculty/profile/#!dbenkes">David Benkeser</a></p>
<hr>
<div id="description" class="section level2">
<h2 class="hasAnchor">
<a href="#description" class="anchor"></a>Description</h2>
<p><code>drord</code> is an R package that computes estimates of effect parameters that are useful for evaluating efficacy of treatments on ordinal outcomes. The effect estimates are <em>covariate-adjusted</em>, which means they can be used in observational settings or to gain efficiency in randomized trials.</p>
<p>The estimators implemented in the package are <em>doubly robust</em>, in that they are based on working models for the probability of treatment as a function of covariates (i.e., the propensity score) and for the CDF of the outcome as a function of covariates in each treatment arm. The latter working model is implemented via proportional odds models that are fit in each treatment arm separately. Estimates based on these two working models are combined to quantify the effects of the treatment on the ordinal outcome in three different ways:</p>
<ul>
<li>Difference in (weighted) means: The outcome levels are treated numerically, with each level possibly assigned a weight. The effect is defined as the difference in average outcomes.</li>
<li>Log odds ratio: The comparison describes the average log-odds (treatment level 1 versus 0) of the cumulative probability for each level of the outcome. See <a href="https://doi.org/10.1111/biom.12450">Diaz et al. (2016)</a> for further discussion of this parameter.</li>
<li>Mann-Whitney: The probability that a randomly-selected individual receiving treatment 1 will have a larger outcome value than a randomly selected individual receiving treatment 0 (with ties assigned weight 1/2). See <a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/sim.6386">Vermeulen et al. (2014)</a> for further discussion.</li>
</ul>
<hr>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<!-- 
Install the current stable release from
[CRAN](https://cran.r-project.org/) via


```r
install.packages("drord")
```
-->
<p>A developmental release may be installed from GitHub via <a href="https://www.rstudio.com/products/rpackages/devtools/"><code>devtools</code></a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"benkeser/drord"</span>)</a></code></pre></div>
<hr>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p>Here we demonstrate calls to <code>drord</code> to compute treatment effects using a simulated data set of COVID-19 outcomes in hospitalized patients.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(drord)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt; Registered S3 methods overwritten by 'ggplot2':</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;   method         from </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt;   [.quosures     rlang</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;   c.quosures     rlang</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   print.quosures rlang</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; drord: Doubly robust estimators for ordinal outcomes</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; Version: 1.0.0</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co"># load data</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(covid19)</a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co"># estimate treatment effects</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14">fit &lt;-<span class="st"> </span><span class="kw"><a href="reference/drord.html">drord</a></span>(<span class="dt">out =</span> covid19<span class="op">$</span>out, </a>
<a class="sourceLine" id="cb2-15" data-line-number="15">             <span class="dt">covar =</span> covid19[ , <span class="st">"age_grp"</span>, <span class="dt">drop =</span> <span class="ot">FALSE</span>],</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">             <span class="dt">treat =</span> covid19<span class="op">$</span>treat)</a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co"># look at estimates</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18">fit</a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; $mann_whitney</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;       est  wald_cil  wald_ciu </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt; 0.5771141 0.5310594 0.6231689 </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; $log_odds</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt;               est   wald_cil     wald_ciu</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt; treat1 -1.2441017 -1.5162963 -0.971907150</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; treat0 -0.8926670 -1.1271207 -0.658213260</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; diff   -0.3514347 -0.6939725 -0.008897035</span></a>
<a class="sourceLine" id="cb2-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-29" data-line-number="29"><span class="co">#&gt; $weighted_mean</span></a>
<a class="sourceLine" id="cb2-30" data-line-number="30"><span class="co">#&gt;              est   wald_cil  wald_ciu</span></a>
<a class="sourceLine" id="cb2-31" data-line-number="31"><span class="co">#&gt; treat1 2.5390850 2.44680920 2.6313607</span></a>
<a class="sourceLine" id="cb2-32" data-line-number="32"><span class="co">#&gt; treat0 2.3635178 2.27899457 2.4480410</span></a>
<a class="sourceLine" id="cb2-33" data-line-number="33"><span class="co">#&gt; diff   0.1755672 0.05620494 0.2949294</span></a></code></pre></div>
<p>There is a <code>plot</code> method included to visualize either the cumulative distribution or probability mass function of outcomes.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># plot of CDF</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">cdf_plot &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(fit, <span class="dt">dist =</span> <span class="st">"cdf"</span>, </a>
<a class="sourceLine" id="cb3-3" data-line-number="3">                 <span class="dt">treat_labels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Treatment"</span>, <span class="st">"Control"</span>),</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                 <span class="dt">out_labels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Death"</span>, <span class="st">"Death or intubation"</span>))</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">cdf_plot<span class="op">$</span>plot <span class="op">+</span><span class="st"> </span>ggsci<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggsci/topics/scale_nejm">scale_fill_nejm</a></span>()</a></code></pre></div>
<p><img src="README-unnamed-chunk-3-1.png" width="700"></p>
<p>The black bars are pointwise 95% confidence intervals; the gray bars are simultaneous 95% confidence intervals.</p>
<p>A similar plot can be made for the PMF.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># plot of PMF</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">pmf_plot &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/plot">plot</a></span>(fit, <span class="dt">dist =</span> <span class="st">"pmf"</span>,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">                 <span class="dt">treat_labels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Treatment"</span>, <span class="st">"Control"</span>),</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">                 <span class="dt">out_labels =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Death"</span>, <span class="st">"Intubation"</span>, <span class="st">"None"</span>))</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">pmf_plot<span class="op">$</span>plot <span class="op">+</span><span class="st"> </span>ggsci<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggsci/topics/scale_nejm">scale_fill_nejm</a></span>()                 </a></code></pre></div>
</div>
<div id="section" class="section level2">
<h2 class="hasAnchor">
<a href="#section" class="anchor"></a><img src="README-unnamed-chunk-4-1.png" width="700">
</h2>
</div>
<div id="issues" class="section level2">
<h2 class="hasAnchor">
<a href="#issues" class="anchor"></a>Issues</h2>
<p>If you encounter any bugs or have any specific feature requests, please <a href="https://github.com/benkeser/drord/issues">file an issue</a>.</p>
<hr>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>After using the <code>drord</code> R package, please cite both of the following:</p>
<pre><code>@Manual{drordpackage,
  title = {drord: Doubly-Robust Estimators for Ordinal Outcomes},
  author = {David Benkeser},
  note = {R package version 1.0.0},
  doi = {TBA}
}

@article{benkeserdiazluedtke2020,
  title = {Improving Precision and Power in Randomized Trials for COVID-19 Treatments Using Covariate Adjustment, for Ordinal or Time to Event Outcomes},
  doi = {10.1101/2020.04.19.20069922},
  journal = {medRxiv: The Preprint Server for Health Sciences.}
}</code></pre>
<hr>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>© 2020- <a href="https://www.sph.emory.edu/faculty/profile/#!dbenkes">David Benkeser</a></p>
<p>The contents of this repository are distributed under the MIT license. See below for details:</p>
<pre><code>The MIT License (MIT)

Copyright (c) 2020- David Benkeser

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/benkeser/drord">https://​github.com/​benkeser/​drord</a>
</li>
<li>Report a bug at <br><a href="https://github.com/benkeser/drord/issues">https://​github.com/​benkeser/​drord/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>David Benkeser <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-1019-8343" target="orcid.widget"><img src="https://members.orcid.org/sites/default/files/vector_iD_icon.svg" class="orcid" alt="ORCID" height="16"></a> </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/benkeser/drord"><img src="https://travis-ci.org/benkeser/drord.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://ci.appveyor.com/project/benkeser/drord"><img src="https://ci.appveyor.com/api/projects/status/github/benkeser/drord?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://codecov.io/github/benkeser/drord?branch=master"><img src="https://img.shields.io/codecov/c/github/benkeser/drord/master.svg" alt="Coverage Status"></a></li>
<li><a href="http://www.r-pkg.org/pkg/drord"><img src="http://www.r-pkg.org/badges/version/drord" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=drord"><img src="https://cranlogs.r-pkg.org/badges/drord" alt="CRAN downloads"></a></li>
<li><a href="http://www.repostatus.org/#active"><img src="http://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active - The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="http://opensource.org/licenses/MIT"><img src="http://img.shields.io/badge/license-MIT-brightgreen.svg" alt="MIT license"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by David Benkeser.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
